<?xml version="1.0"?>
<robot name="myrobot" xmlns:xacro="http://ros.org/wiki/xacro">

  <!-- ====== Definición de materiales ====== -->
  <material name="black">
    <color rgba="0 0 0 1"/>
  </material>

  <material name="silver">
    <color rgba="0.7 0.7 0.7 1"/>
  </material>

  <material name="white">
    <color rgba="1 1 1 1"/>
  </material>

  <!-- ====== Base ====== -->
  
  <link name="base_footprint"/> <!--link vacío, sin geometría. Sirve como marco de referencia en el suelo-->

  <link name="base_link">
    <visual>
      <origin xyz="0 0 0" rpy="1.5708 0 -1.5708"/> <!-- Aquí corrige la orientación/posición del mesh dentro del link. -->
      <geometry>
        <mesh filename="package://lawn_description/meshes/base_link.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="silver"/>
    </visual>

    <inertial>
      <origin xyz="0.000014 0.051934 0.001333" rpy="0 0 0"/> <!-- centro de masa -->
      <mass value="1.8"/> <!-- masa total (kg) -->
      <inertia ixx="0.02018" iyy="0.04131" izz="0.05384" ixy="0" ixz="0" iyz="0"/>
    </inertial>

  </link>


  <!--  Aquí se une el base_footprint con el base_link.-->
  <joint name="base_joint" type="fixed">
    <parent link="base_footprint"/>
    <child link="base_link"/>
    <origin xyz="0 0 0.075" rpy="0 0 0"/> <!--0.033 en Z eleva el base_link → así el base_footprint queda en el suelo, y el robot “apoyado”-->
  </joint>

  <!-- ====== Rin derecha frontal ====== -->
  <link name="rim_right_front_link">
    <visual>
      <origin xyz="0 0 0" rpy="1.57 0 0"/> <!-- El mesh se rota con rpy="1.57 0 0" para ponerlo en posición vertical (porque normalmente en CAD está acostado). -->
      <geometry>
        <mesh filename="package://lawn_description/meshes/rim.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="white"/>
    </visual>

    <inertial>
      <origin xyz="0 0.014365 0" rpy="0 0 0"/> <!-- centro de masa -->
      <mass value="0.07"/> <!-- masa total (kg) -->
      <inertia ixx="0.000049" iyy="0.000049" izz="0.0000875" ixy="0" ixz="0" iyz="0"/>
    </inertial>

  </link>

  <joint name="rim_right_front_joint" type="continuous"> <!--Joint tipo continuous → la rueda gira libremente (sin límites).-->
    <parent link="base_link"/>
    <child link="rim_right_front_link"/>
    <axis xyz="0 1 0"/> <!-- Eje de giro (axis="0 1 0") porque el mesh fue girado con rpy para que coincida. -->
    <origin xyz="0.21 -0.17 0.025" rpy="0 0 0"/> <!-- origin la desplaza 0.07 m hacia la derecha (Y negativo). -->
  </joint>

  <!-- ====== Neumatico derecha frontal ====== -->
  <link name="tire_right_front_link">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 -1.57"/> <!-- El mesh se rota con rpy="1.57 0 0" para ponerlo en posición vertical (porque normalmente en CAD está acostado). -->
      <geometry>
        <mesh filename="package://lawn_description/meshes/wheel.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="black"/>
    </visual>

    <inertial>
      <origin xyz="0 0.015 0" rpy="0 0 0"/> <!-- centro de masa -->
      <mass value="0.24"/> <!-- masa total (kg) -->
      <inertia ixx="0.000618" iyy="0.000618" izz="0.0012" ixy="0" ixz="0" iyz="0"/>
    </inertial>

  </link>

  <joint name="wheel_right_front_joint" type="fixed"> <!--Joint tipo continuous → la rueda gira libremente (sin límites).-->
    <parent link="rim_right_front_link"/>
    <child link="tire_right_front_link"/>
    <axis xyz="0 0 0"/> <!-- Eje de giro (axis="0 1 0") porque el mesh fue girado con rpy para que coincida. -->
    <origin xyz="0 -0.03 0" rpy="0 0 0"/> <!-- origin la desplaza 0.07 m hacia la derecha (Y negativo). -->
  </joint>

  <!-- ====== Rin derecha trasera ====== -->
  <link name="rim_right_back_link">
    <visual>
      <origin xyz="0 0 0" rpy="1.57 0 0"/> <!-- El mesh se rota con rpy="1.57 0 0" para ponerlo en posición vertical (porque normalmente en CAD está acostado). -->
      <geometry>
        <mesh filename="package://lawn_description/meshes/rim.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="white"/>
    </visual>

    <inertial>
      <origin xyz="0 0.014365 0" rpy="0 0 0"/> <!-- centro de masa -->
      <mass value="0.07"/> <!-- masa total (kg) -->
      <inertia ixx="0.000049" iyy="0.000049" izz="0.0000875" ixy="0" ixz="0" iyz="0"/>
    </inertial>

  </link>

  <joint name="rim_right_back_joint" type="continuous"> <!--Joint tipo continuous → la rueda gira libremente (sin límites).-->
    <parent link="base_link"/>
    <child link="rim_right_back_link"/>
    <axis xyz="0 1 0"/> <!-- Eje de giro (axis="0 1 0") porque el mesh fue girado con rpy para que coincida. -->
    <origin xyz="-0.21 -0.17 0.025" rpy="0 0 0"/> <!-- origin la desplaza 0.07 m hacia la derecha (Y negativo). -->
  </joint>

  <!-- ====== Neumatico derecha trasero ====== -->
  <link name="tire_right_back_link">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 -1.5708"/> <!-- El mesh se rota con rpy="1.57 0 0" para ponerlo en posición vertical (porque normalmente en CAD está acostado). -->
      <geometry>
        <mesh filename="package://lawn_description/meshes/wheel.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="black"/>
    </visual>

    <inertial>
      <origin xyz="0 0.015 0" rpy="0 0 0"/> <!-- centro de masa -->
      <mass value="0.24"/> <!-- masa total (kg) -->
      <inertia ixx="0.000618" iyy="0.000618" izz="0.0012" ixy="0" ixz="0" iyz="0"/>
    </inertial>

  </link>

  <joint name="wheel_right_back_joint" type="fixed"> <!--Joint tipo continuous → la rueda gira libremente (sin límites).-->
    <parent link="rim_right_back_link"/>
    <child link="tire_right_back_link"/>
    <axis xyz="0 1 0"/> <!-- Eje de giro (axis="0 1 0") porque el mesh fue girado con rpy para que coincida. -->
    <origin xyz="0 -0.03 0" rpy="0 0 0"/> <!-- origin la desplaza 0.07 m hacia la derecha (Y negativo). -->
  </joint>

  <!-- ====== Rin izquierda frontal ====== Igual que la derecha, pero rotada en sentido contrario. -->
  <link name="rim_left_front_link">
    <visual>
      <origin xyz="0 0 0" rpy="-1.57 0 0"/> <!-- rueda vertical -->
      <geometry>
        <mesh filename="package://lawn_description/meshes/rim.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="white"/>
    </visual>

    <inertial>
      <origin xyz="0 0.014365 0" rpy="0 0 0"/> <!-- centro de masa -->
      <mass value="0.07"/> <!-- masa total (kg) -->
      <inertia ixx="0.000049" iyy="0.000049" izz="0.0000875" ixy="0" ixz="0" iyz="0"/>
    </inertial>

  </link>

  <joint name="rim_left_front_joint" type="continuous">
    <parent link="base_link"/>
    <child link="rim_left_front_link"/>
    <axis xyz="0 1 0"/> <!-- Eje de giro (axis="0 1 0") porque el mesh fue girado con rpy para que coincida. -->
    <origin xyz="0.21 0.17 0.025" rpy="0 0 0"/> <!-- separación lateral desde el centro del base_link -->
  </joint>

  <!-- ====== Neumatico izquierda frontal ====== Igual que la derecha, pero rotada en sentido contrario. -->
  <link name="tire_left_front_link">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 -1.5708"/> <!-- rueda vertical -->
      <geometry>
        <mesh filename="package://lawn_description/meshes/wheel.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="black"/>
    </visual>

    <inertial>
      <origin xyz="0 0.015 0" rpy="0 0 0"/> <!-- centro de masa -->
      <mass value="0.24"/> <!-- masa total (kg) -->
      <inertia ixx="0.000618" iyy="0.000618" izz="0.0012" ixy="0" ixz="0" iyz="0"/>
    </inertial>

  </link>

  <joint name="tire_left_front_joint" type="fixed">
    <parent link="rim_left_front_link"/>
    <child link="tire_left_front_link"/>
    <axis xyz="0 1 0"/> <!-- Eje de giro (axis="0 1 0") porque el mesh fue girado con rpy para que coincida. -->
    <origin xyz="0 0 0" rpy="0 0 0"/> <!-- separación lateral desde el centro del base_link -->
  </joint>

  <!-- ====== Rin izquierda trasera ====== Igual que la derecha, pero rotada en sentido contrario. -->
  <link name="rim_left_back_link">
    <visual>
      <origin xyz="0 0 0" rpy="-1.57 0 0"/> <!-- rueda vertical -->
      <geometry>
        <mesh filename="package://lawn_description/meshes/rim.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="white"/>
    </visual>

    <inertial>
      <origin xyz="0 0.014365 0" rpy="0 0 0"/> <!-- centro de masa -->
      <mass value="0.07"/> <!-- masa total (kg) -->
      <inertia ixx="0.000049" iyy="0.000049" izz="0.0000875" ixy="0" ixz="0" iyz="0"/>
    </inertial>

  </link>

  <joint name="rim_left_back_joint" type="continuous">
    <parent link="base_link"/>
    <child link="rim_left_back_link"/>
    <axis xyz="0 1 0"/> <!-- Eje de giro (axis="0 1 0") porque el mesh fue girado con rpy para que coincida. -->
    <origin xyz="-0.21 0.17 0.025" rpy="0 0 0"/> <!-- separación lateral desde el centro del base_link -->
  </joint>

  <!-- ====== Neumatico izquierda frontal ====== Igual que la derecha, pero rotada en sentido contrario. -->
  <link name="tire_left_back_link">
    <visual>
      <origin xyz="0 0 0" rpy="0 0 -1.5708"/> <!-- rueda vertical -->
      <geometry>
        <mesh filename="package://lawn_description/meshes/wheel.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="black"/>
    </visual>

    <inertial>
      <origin xyz="0 0.015 0" rpy="0 0 0"/> <!-- centro de masa -->
      <mass value="0.24"/> <!-- masa total (kg) -->
      <inertia ixx="0.000618" iyy="0.000618" izz="0.0012" ixy="0" ixz="0" iyz="0"/>
    </inertial>

  </link>

  <joint name="tire_left_back_joint" type="fixed">
    <parent link="rim_left_back_link"/>
    <child link="tire_left_back_link"/>
    <axis xyz="0 1 0"/> <!-- Eje de giro (axis="0 1 0") porque el mesh fue girado con rpy para que coincida. -->
    <origin xyz="0 0 0" rpy="0 0 0"/> <!-- separación lateral desde el centro del base_link -->
  </joint>

  <!-- ====== Tapa ====== -->
  <link name="cover_link">
    <visual>
      <origin xyz="0 0 0" rpy="1.57 0 -1.57"/>
      <geometry>
        <mesh filename="package://lawn_description/meshes/cover.stl" scale="0.001 0.001 0.001"/>
      </geometry>
      <material name="silver"/>
    </visual>

    <inertial>
      <origin xyz="0 0.002194 0" rpy="0 0 0"/> <!-- centro de masa -->
      <mass value="0.7"/> <!-- masa total (kg) -->
      <inertia ixx="0.0063656" iyy="0.0146" izz="0.02094" ixy="0" ixz="0" iyz="0"/>
    </inertial>

  </link>

  <joint name="cover_joint" type="fixed">
    <parent link="base_link"/>
    <child link="cover_link"/>
    <origin xyz="0 0 0.16" rpy="0 0 0"/> <!-- separación lateral desde el centro del base_link -->
  </joint>

</robot>
